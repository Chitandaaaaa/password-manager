# 密码管家 - 单元测试用例补充文档

## 补充说明

本文档补充原测试设计文档中缺失的组件测试用例和边界场景测试。

---

## 1. 缺失组件测试用例

### 1.1 EditPasswordModal 测试用例

**文件**: `src/components/EditPasswordModal.test.tsx`

#### 基础渲染测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-001 | 渲染-关闭状态 | isOpen=false | 不渲染任何内容 | 高 |
| EP-002 | 渲染-空密码 | password=null | 不渲染任何内容 | 高 |
| EP-003 | 渲染-正常打开 | isOpen=true, password有效 | 渲染完整的编辑表单 | 高 |
| EP-004 | 初始化-表单填充 | 传入password和decryptedPassword | 表单字段正确填充初始值 | 高 |
| EP-005 | 初始化-加载分类 | 组件打开时 | 调用listCategories加载分类列表 | 高 |

#### 表单验证测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-006 | 验证-空软件名 | 清空软件名后提交 | 显示错误"请输入软件名称" | 高 |
| EP-007 | 验证-空密码 | 清空密码后提交 | 显示错误"请输入密码" | 高 |
| EP-008 | 验证-仅空格软件名 | 输入仅空格的软件名 | 显示错误"请输入软件名称" | 高 |
| EP-009 | 验证-软件名前后空格 | 输入带前后空格的软件名 | 提交时自动trim | 中 |
| EP-010 | 验证-用户名可选 | 清空用户名后提交 | 验证通过，正常提交 | 中 |
| EP-011 | 验证-URL可选 | 清空URL后提交 | 验证通过，正常提交 | 中 |
| EP-012 | 验证-notes可选 | 清空notes后提交 | 验证通过，正常提交 | 中 |

#### 密码强度测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-013 | 密码强度-实时计算 | 修改密码内容 | 实时更新强度条和文字 | 高 |
| EP-014 | 密码强度-空密码 | 清空密码字段 | 隐藏强度指示器 | 中 |
| EP-015 | 密码强度-各种强度 | 输入不同强度密码 | 强度指示正确反映密码强度 | 中 |

#### 功能交互测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-016 | 显示/隐藏密码 | 点击眼睛图标 | 切换密码输入框的type属性 | 高 |
| EP-017 | 生成随机密码 | 点击刷新按钮 | 调用generatePassword，填充密码字段 | 高 |
| EP-018 | 生成功能-禁用状态 | 生成过程中 | 按钮显示loading状态 | 中 |
| EP-019 | 分类选择 | 选择不同分类 | category字段更新 | 中 |

#### 提交测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-020 | 提交成功 | 填写有效数据并提交 | 调用updatePassword，成功后调用onSuccess和onClose | 高 |
| EP-021 | 提交失败 | 模拟updatePassword返回错误 | 显示错误信息，不关闭modal | 高 |
| EP-022 | 提交-数据trim | 提交带前后空格的字段 | 调用API时自动trim字符串字段 | 中 |
| EP-023 | 提交-loading状态 | 提交过程中 | 显示"保存中..."，禁用提交按钮 | 高 |
| EP-024 | 提交-网络错误 | 模拟网络错误 | 显示"更新失败，请重试" | 中 |

#### 关闭测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EP-025 | 关闭按钮 | 点击X按钮 | 调用onClose | 高 |
| EP-026 | 取消按钮 | 点击取消按钮 | 调用onClose | 高 |
| EP-027 | 关闭-有修改 | 修改字段后关闭 | 直接关闭，不提示保存（根据实现） | 低 |

---

### 1.2 ExportModal 测试用例

**文件**: `src/components/ExportModal.test.tsx`

#### 基础渲染测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-001 | 渲染-关闭状态 | isOpen=false | 不渲染任何内容 | 高 |
| EX-002 | 渲染-打开状态 | isOpen=true | 渲染导出modal | 高 |
| EX-003 | 渲染-默认格式 | 打开modal | 默认选中JSON格式 | 中 |
| EX-004 | 渲染-默认包含密码 | 打开modal | 默认勾选"包含明文密码" | 中 |
| EX-005 | 渲染-安全提示 | 打开modal | 显示安全提醒区域 | 中 |

#### 格式选择测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-006 | 选择JSON格式 | 点击JSON选项 | JSON选项高亮，CSV取消选中 | 高 |
| EX-007 | 选择CSV格式 | 点击CSV选项 | CSV选项高亮，JSON取消选中 | 高 |
| EX-008 | 格式切换 | 从JSON切换到CSV | 正确切换选中状态 | 中 |

#### 选项测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-009 | 取消包含密码 | 取消勾选包含密码 | 复选框取消选中 | 高 |
| EX-010 | 重新包含密码 | 重新勾选包含密码 | 复选框选中 | 中 |

#### 导出功能测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-011 | 导出-JSON格式 | 选择JSON格式导出 | 调用exportPasswords，生成JSON文件下载 | 高 |
| EX-012 | 导出-CSV格式 | 选择CSV格式导出 | 调用exportPasswords，生成CSV文件下载 | 高 |
| EX-013 | 导出-包含密码 | 勾选包含密码后导出 | 导出数据中包含明文密码 | 高 |
| EX-014 | 导出-不包含密码 | 取消勾选后导出JSON | 导出数据中password字段为"***" | 高 |
| EX-015 | 导出-不包含密码CSV | 取消勾选后导出CSV | 导出CSV中密码列为"***" | 高 |
| EX-016 | 导出-loading状态 | 导出过程中 | 显示"导出中..."，禁用导出按钮 | 高 |
| EX-017 | 导出-成功提示 | 导出成功后 | 显示成功消息"成功导出X条密码记录" | 高 |
| EX-018 | 导出-自动关闭 | 导出成功后 | 3秒后自动关闭modal | 中 |
| EX-019 | 导出-失败 | 模拟exportPasswords返回错误 | 显示错误信息 | 高 |
| EX-020 | 导出-网络错误 | 模拟网络错误 | 显示"导出失败，请重试" | 中 |
| EX-021 | 导出-空数据 | 导出0条密码 | 显示导出0条或相应提示 | 中 |

#### CSV格式特殊测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-022 | CSV-特殊字符处理 | 密码包含逗号或引号 | 正确转义CSV特殊字符 | 中 |
| EX-023 | CSV-中文标题 | 导出CSV | 标题行为中文（软件名称、用户名等） | 低 |
| EX-024 | CSV-日期格式 | 导出CSV | 日期格式化为本地可读格式 | 低 |

#### 关闭测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| EX-025 | 关闭按钮 | 点击X按钮 | 调用onClose | 高 |
| EX-026 | 取消按钮 | 点击取消按钮 | 调用onClose | 高 |
| EX-027 | 导出中关闭 | 导出过程中点击取消 | 中断导出，关闭modal | 低 |

---

### 1.3 ChangePasswordModal 测试用例

**文件**: `src/components/ChangePasswordModal.test.tsx`

#### 基础渲染测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-001 | 渲染-关闭状态 | isOpen=false | 不渲染任何内容 | 高 |
| CP-002 | 渲染-打开状态 | isOpen=true | 渲染修改密码modal | 高 |
| CP-003 | 渲染-警告提示 | 打开modal | 显示重要提醒区域 | 中 |
| CP-004 | 渲染-表单字段 | 打开modal | 显示旧密码、新密码、确认密码三个字段 | 高 |

#### 表单验证测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-005 | 验证-空旧密码 | 不输入旧密码直接提交 | 显示错误"请输入旧密码" | 高 |
| CP-006 | 验证-新密码太短 | 输入<8位的新密码 | 显示错误"新密码至少需要8位" | 高 |
| CP-007 | 验证-新密码不一致 | 新密码和确认密码不同 | 显示错误"两次输入的新密码不一致" | 高 |
| CP-008 | 验证-新旧密码相同 | 新密码与旧密码相同 | 显示错误"新密码不能与旧密码相同" | 高 |
| CP-009 | 验证-确认密码为空 | 不输入确认密码 | 显示错误"两次输入的新密码不一致" | 高 |
| CP-010 | 验证-通过 | 输入有效的新密码组合 | 验证通过，可以提交 | 高 |

#### 密码强度测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-011 | 密码强度-显示 | 输入新密码 | 实时显示密码强度指示器 | 高 |
| CP-012 | 密码强度-更新 | 输入不同强度密码 | 强度条和文字正确变化 | 中 |
| CP-013 | 密码强度-空密码 | 清空新密码 | 隐藏强度指示器 | 中 |

#### 显示/隐藏密码测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-014 | 显示旧密码 | 点击旧密码眼睛图标 | 切换旧密码可见性 | 高 |
| CP-015 | 显示新密码 | 点击新密码眼睛图标 | 切换新密码和确认密码可见性（联动） | 高 |
| CP-016 | 图标状态 | 切换显示/隐藏 | 眼睛图标正确变化 | 低 |

#### 提交测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-017 | 提交成功 | 输入有效密码并提交 | 调用changeMasterPassword，显示成功消息 | 高 |
| CP-018 | 提交成功-自动关闭 | 修改成功后 | 2秒后自动调用onSuccess和onClose | 高 |
| CP-019 | 提交失败-旧密码错误 | 模拟返回旧密码错误 | 显示错误信息 | 高 |
| CP-020 | 提交失败-其他错误 | 模拟其他错误 | 显示"修改失败"或具体错误信息 | 高 |
| CP-021 | 提交-loading状态 | 提交过程中 | 显示"修改中..."，禁用提交按钮 | 高 |
| CP-022 | 提交-网络错误 | 模拟网络错误 | 显示"修改失败，请重试" | 中 |

#### 关闭测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CP-023 | 关闭按钮 | 点击X按钮 | 调用onClose | 高 |
| CP-024 | 取消按钮 | 点击取消按钮 | 调用onClose（提交时禁用） | 高 |
| CP-025 | 成功时禁用关闭 | 修改成功后 | 禁用取消按钮，等待自动关闭 | 低 |

---

### 1.4 SmartImportModal 测试用例

**文件**: `src/components/SmartImportModal.test.tsx`

#### 基础渲染测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-001 | 渲染-关闭状态 | isOpen=false | 不渲染任何内容 | 高 |
| SI-002 | 渲染-打开状态 | isOpen=true | 渲染导入modal，显示上传步骤 | 高 |
| SI-003 | 渲染-AI选项 | 打开modal | 默认勾选"使用AI智能识别" | 中 |
| SI-004 | 渲染-提示信息 | 打开modal | 显示格式提示信息 | 低 |

#### 步骤流转测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-005 | 步骤-上传 | 初始状态 | 显示上传步骤（upload） | 高 |
| SI-006 | 步骤-处理中 | 选择文件后使用AI | 切换到处理中步骤（processing） | 高 |
| SI-007 | 步骤-审核 | AI解析成功后 | 切换到审核步骤（review） | 高 |
| SI-008 | 步骤-手动编辑 | AI解析失败或格式无法识别 | 切换到手动编辑步骤（manual） | 高 |
| SI-009 | 步骤-完成 | 导入成功后 | 切换到完成步骤（complete） | 高 |
| SI-010 | 步骤-返回上传 | 处理失败或点击重新选择 | 返回上传步骤 | 中 |

#### 文件选择测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-011 | 选择文件-取消 | 打开文件选择器后取消 | 保持在上传步骤，不报错 | 高 |
| SI-012 | 选择文件-成功 | 选择有效文件 | 读取文件内容 | 高 |
| SI-013 | 选择文件-失败 | 模拟读取失败 | 显示错误信息 | 高 |
| SI-014 | 选择文件-loading | 读取文件过程中 | 显示"读取中..."，禁用选择按钮 | 高 |

#### AI解析测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-015 | AI解析-成功 | 选择文件使用AI解析 | 显示处理中状态，成功后进入审核 | 高 |
| SI-016 | AI解析-超时 | 模拟AI响应超时 | 显示超时错误和建议，返回上传步骤 | 高 |
| SI-017 | AI解析-失败 | 模拟AI返回错误 | 显示错误信息，返回上传步骤 | 高 |
| SI-018 | AI解析-进度提示 | 处理过程中 | 显示"AI正在分析文件..."和进度文本 | 中 |

#### 手动解析测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-019 | 手动解析-JSON | 不使用AI，上传JSON文件 | 解析JSON，进入审核步骤 | 高 |
| SI-020 | 手动解析-CSV | 不使用AI，上传CSV文件 | 解析CSV，进入审核步骤 | 高 |
| SI-021 | 手动解析-简单列表 | 不使用AI，上传简单列表（每3行） | 解析为三行一组，进入审核 | 高 |
| SI-022 | 手动解析-失败 | 无法识别格式 | 进入手动编辑步骤 | 高 |
| SI-023 | 手动解析-空文件 | 上传空文件 | 显示"文件内容为空" | 中 |

#### 审核步骤测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-024 | 审核-显示记录数 | 进入审核步骤 | 显示"识别到X条记录" | 高 |
| SI-025 | 审核-默认全选 | 进入审核步骤 | 默认选中所有记录 | 高 |
| SI-026 | 审核-取消选择 | 取消勾选某条记录 | 该记录从选中集合移除 | 高 |
| SI-027 | 审核-重新选择 | 勾选某条记录 | 该记录添加到选中集合 | 高 |
| SI-028 | 审核-全选/取消全选 | 点击全选按钮 | 切换全选/全不选状态 | 高 |
| SI-029 | 审核-显示选中数 | 选择记录后 | 显示"已选择X条" | 中 |
| SI-030 | 审核-编辑字段 | 修改某条记录的字段 | 更新该条目数据 | 高 |
| SI-031 | 审核-编辑软件名 | 修改软件名称 | 更新softwareName字段 | 高 |
| SI-032 | 审核-编辑密码 | 修改密码 | 更新password字段 | 高 |
| SI-033 | 审核-编辑分类 | 修改分类 | 更新category字段 | 中 |
| SI-034 | 审核-编辑用户名 | 修改用户名 | 更新username字段 | 中 |
| SI-035 | 审核-编辑网址 | 修改网址 | 更新url字段 | 中 |

#### 手动编辑步骤测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-036 | 手动编辑-显示文本 | 进入手动编辑步骤 | 显示AI原始响应文本 | 高 |
| SI-037 | 手动编辑-解析JSON | 编辑有效JSON后点击解析 | 解析成功，进入审核步骤 | 高 |
| SI-038 | 手动编辑-解析错误 | 编辑无效JSON后点击解析 | 显示"JSON格式错误" | 高 |
| SI-039 | 手动编辑-字段映射 | 使用中文字段名 | 正确映射到英文字段名 | 中 |
| SI-040 | 手动编辑-必填字段 | 缺少softwareName或password | 显示错误提示 | 高 |
| SI-041 | 手动编辑-返回上传 | 点击返回重试 | 返回上传步骤 | 中 |

#### 导入测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-042 | 导入-未选择 | 不选择任何记录点击导入 | 显示"请先选择要导入的条目" | 高 |
| SI-043 | 导入-成功 | 选择记录后导入 | 调用addPassword导入所有选中记录 | 高 |
| SI-044 | 导入-部分成功 | 部分记录导入失败 | 成功导入的记录数正确 | 中 |
| SI-045 | 导入-loading | 导入过程中 | 显示"导入中..."，禁用导入按钮 | 高 |
| SI-046 | 导入-完成提示 | 导入完成后 | 显示"导入成功"，2秒后关闭modal | 高 |
| SI-047 | 导入-调用onSuccess | 导入完成后 | 调用onSuccess回调 | 高 |
| SI-048 | 导入-错误处理 | 导入过程中出错 | 显示"导入失败" | 高 |

#### 关闭测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| SI-049 | 关闭按钮 | 点击X按钮 | 调用resetState和onClose | 高 |
| SI-050 | 关闭-重置状态 | 关闭后重新打开 | 状态重置为初始值 | 中 |

---

### 1.5 CategoryDisplayModal 测试用例

**文件**: `src/components/CategoryDisplayModal.test.tsx`

#### 基础渲染测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CD-001 | 渲染-关闭状态 | isOpen=false | 不渲染任何内容 | 高 |
| CD-002 | 渲染-打开状态 | isOpen=true | 渲染分类显示设置modal | 高 |
| CD-003 | 渲染-加载配置 | 打开modal时 | 调用getDisplayCategories加载配置 | 高 |
| CD-004 | 渲染-loading状态 | 加载配置过程中 | 显示loading状态 | 中 |

#### 配置加载测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CD-005 | 加载-成功 | 成功加载配置 | 显示所有分类和当前选中状态 | 高 |
| CD-006 | 加载-失败 | 模拟加载失败 | 显示错误信息 | 高 |
| CD-007 | 加载-显示最大数 | 加载配置后 | 显示"最多选择X个"和当前已选数 | 中 |

#### 选择测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CD-008 | 选择-添加分类 | 点击未选中的分类 | 该分类被选中，添加到选中列表 | 高 |
| CD-009 | 选择-取消分类 | 点击已选中的分类 | 该分类取消选中，从列表移除 | 高 |
| CD-010 | 选择-超过最大数 | 尝试选择超过maxDisplayCount个分类 | 显示错误提示"最多只能选择X个分类" | 高 |
| CD-011 | 选择-UI反馈 | 选择/取消分类 | 选中状态UI正确变化（边框、背景、对勾） | 中 |
| CD-012 | 选择-已选标签 | 选择分类后 | 底部显示已选分类标签 | 中 |
| CD-013 | 选择-标签移除 | 点击已选标签的X | 取消该分类的选中状态 | 中 |

#### 保存测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CD-014 | 保存-成功 | 选择分类后保存 | 调用updateDisplayCategories，显示成功 | 高 |
| CD-015 | 保存-失败 | 模拟保存失败 | 显示错误信息 | 高 |
| CD-016 | 保存-空选择 | 不选择任何分类点击保存 | 禁用保存按钮或显示错误 | 高 |
| CD-017 | 保存-loading | 保存过程中 | 显示"保存中..."，禁用保存按钮 | 高 |
| CD-018 | 保存-自动关闭 | 保存成功后 | 1.5秒后自动关闭modal | 中 |

#### 关闭测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| CD-019 | 关闭按钮 | 点击X按钮 | 调用onClose | 高 |
| CD-020 | 取消按钮 | 点击取消按钮 | 调用onClose（保存时禁用） | 高 |

---

## 2. 边界字段判断测试用例补充

### 2.1 字符串长度边界测试

#### PasswordService / DatabaseService

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-001 | 软件名-最大长度 | 输入超长软件名（如1000字符） | 正确处理，不截断（根据实现） | 中 |
| BL-002 | 软件名-最小长度 | 输入1字符软件名 | 正确处理 | 高 |
| BL-003 | 用户名-超长 | 输入超长用户名（如1000字符） | 正确处理 | 中 |
| BL-004 | URL-超长 | 输入超长URL（如2000字符） | 正确处理 | 中 |
| BL-005 | notes-超长 | 输入超长notes（如10000字符） | 正确处理 | 中 |
| BL-006 | 密码-超长 | 输入超长密码（如1000字符） | 正确加密存储和解密 | 中 |
| BL-007 | 分类名-超长 | 输入超长分类名 | 正确处理 | 中 |

### 2.2 特殊字符边界测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-008 | 软件名-HTML标签 | 输入包含HTML标签的软件名 | 正确处理，不执行标签 | 中 |
| BL-009 | 软件名-JavaScript | 输入包含JS代码的软件名 | 正确处理，不执行代码 | 中 |
| BL-010 | 软件名-换行符 | 输入包含换行符的软件名 | 正确处理（移除或保留） | 中 |
| BL-011 | notes-多行文本 | 输入多行notes | 正确保存换行符 | 中 |
| BL-012 | URL-特殊协议 | 输入javascript:alert() | 正确处理或过滤 | 中 |
| BL-013 | 用户名-邮箱格式 | 输入各种邮箱格式 | 正确处理 | 中 |
| BL-014 | 用户名-手机号 | 输入手机号格式 | 正确处理 | 低 |

### 2.3 空值和undefined边界测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-015 | 用户名-undefined | 不提供username字段 | 存储为undefined/null | 高 |
| BL-016 | URL-undefined | 不提供url字段 | 存储为undefined/null | 高 |
| BL-017 | notes-undefined | 不提供notes字段 | 存储为undefined/null | 高 |
| BL-018 | category-undefined | 不提供category字段 | 存储为"未分类" | 高 |
| BL-019 | 密码-空字符串 | 输入空字符串密码 | 根据业务决定（接受或拒绝） | 高 |
| BL-020 | 软件名-只有空格 | 输入只有空格的软件名 | trim后拒绝或处理 | 高 |
| BL-021 | 全字段-undefined | 只提供软件名和密码 | 其他字段为undefined | 高 |

### 2.4 数值边界测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-022 | ID-负数 | 操作负数ID | 正确处理（找不到记录） | 中 |
| BL-023 | ID-零 | 操作ID=0 | 正确处理（找不到记录） | 中 |
| BL-024 | ID-超大值 | 操作超大ID | 正确处理（找不到记录） | 中 |
| BL-025 | ID-小数 | 操作小数ID | 正确处理或转换 | 低 |

### 2.5 并发和时序边界测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-026 | 快速点击-显示密码 | 快速多次点击显示密码 | 不重复调用API，状态正确 | 中 |
| BL-027 | 快速点击-删除 | 快速多次点击删除 | 只执行一次删除 | 中 |
| BL-028 | 重复提交-添加 | 快速多次提交添加表单 | 防止重复添加 | 高 |
| BL-029 | 重复提交-编辑 | 快速多次提交编辑表单 | 防止重复更新 | 高 |
| BL-030 | 并发修改 | 同时修改同一密码 | 后提交的覆盖先提交的（根据实现） | 低 |

### 2.6 配置边界测试

| 用例ID | 用例名称 | 测试步骤 | 预期结果 | 优先级 |
|--------|----------|----------|----------|--------|
| BL-031 | 自动锁定-边界值 | 设置timeout为1分钟 | 正确处理 | 中 |
| BL-032 | 自动锁定-最大值 | 设置timeout为60分钟 | 正确处理 | 中 |
| BL-033 | 剪贴板清除-边界值 | 设置timeout为5秒 | 正确处理 | 中 |
| BL-034 | 剪贴板清除-最大值 | 设置timeout为300秒 | 正确处理 | 中 |
| BL-035 | 显示分类-0个 | 选择0个显示分类 | 显示空或所有分类（根据实现） | 中 |
| BL-036 | 显示分类-最大数 | 选择maxDisplayCount个分类 | 正确处理 | 中 |

---

## 3. 增删改查场景验证清单

### 3.1 密码记录 CRUD 覆盖验证

| 操作 | 测试覆盖 | 用例ID范围 | 状态 |
|------|----------|------------|------|
| **创建 (Create)** | | | |
| - 正常添加 | PS-001, DB-011, AP-010 | PasswordService, Database, AddPasswordModal | ✅ 已覆盖 |
| - 最小字段添加 | PS-002, AP-004~006 | 必填字段验证 | ✅ 已覆盖 |
| - 最大字段添加 | PS-001, AP-010 | 所有字段添加 | ✅ 已覆盖 |
| - 重复添加 | BL-028, ST-002 | 防重复提交 | ✅ 已覆盖 |
| **读取 (Read)** | | | |
| - 查询所有 | PS-008, DB-012, MP-001 | 无筛选查询 | ✅ 已覆盖 |
| - 条件查询 | PS-009~011 | 搜索和分类筛选 | ✅ 已覆盖 |
| - 单条查询 | PS-016, DB-013 | 根据ID查询 | ✅ 已覆盖 |
| - 导出查询 | PS-031~035 | 导出所有数据 | ✅ 已覆盖 |
| **更新 (Update)** | | | |
| - 全字段更新 | PS-023, DB-014, EP-020 | 更新所有字段 | ✅ 已覆盖 |
| - 部分字段更新 | PS-021, EP-006~012 | 部分字段更新 | ✅ 已覆盖 |
| - 单字段更新 | PS-021~022, EP-016~019 | 单个字段更新 | ✅ 已覆盖 |
| - 密码字段更新 | PS-022, EP-020 | 更新密码字段 | ✅ 已覆盖 |
| - 重复更新 | BL-029 | 防重复提交 | ✅ 已覆盖 |
| **删除 (Delete)** | | | |
| - 单条删除 | PS-028, DB-015, PC-011 | 删除单条记录 | ✅ 已覆盖 |
| - 批量删除 | DB-016, MP-014 | 清除所有密码 | ✅ 已覆盖 |
| - 删除不存在 | PS-029 | 删除不存在的ID | ✅ 已覆盖 |
| - 重复删除 | BL-027 | 快速多次点击删除 | ✅ 已覆盖 |

### 3.2 分类管理 CRUD 覆盖验证

| 操作 | 测试覆盖 | 用例ID范围 | 状态 |
|------|----------|------------|------|
| **创建 (Create)** | | | |
| - 正常添加 | DB-019, CM-004 | 添加新分类 | ✅ 已覆盖 |
| - 重复添加 | DB-020, CM-003 | 添加已存在分类 | ✅ 已覆盖 |
| - 空名称添加 | CM-002 | 添加空分类名 | ✅ 已覆盖 |
| **读取 (Read)** | | | |
| - 查询所有 | DB-018, CM-001 | 获取分类列表 | ✅ 已覆盖 |
| - 查询显示分类 | DB-026~029, CD-005 | 获取显示分类配置 | ✅ 已覆盖 |
| **更新 (Update)** | | | |
| - 重命名 | DB-022, CM-007 | 重命名分类 | ✅ 已覆盖 |
| - 重命名为已存在 | DB-023, CM-008 | 重命名冲突 | ✅ 已覆盖 |
| - 更新显示分类 | DB-027, CD-014 | 更新显示配置 | ✅ 已覆盖 |
| **删除 (Delete)** | | | |
| - 正常删除 | DB-021, CM-005 | 删除分类 | ✅ 已覆盖 |
| - 删除含密码分类 | DB-021, CM-005 | 分类下密码移到"未分类" | ✅ 已覆盖 |
| - 取消删除 | CM-006 | 取消删除操作 | ✅ 已覆盖 |

### 3.3 用户管理 CRUD 覆盖验证

| 操作 | 测试覆盖 | 用例ID范围 | 状态 |
|------|----------|------------|------|
| **创建 (Create)** | | | |
| - 初始化创建 | DB-006, SP-006 | 首次设置创建用户 | ✅ 已覆盖 |
| - 重置后创建 | DB-010, LP-011 | 重置密码后创建用户 | ✅ 已覆盖 |
| **读取 (Read)** | | | |
| - 检查存在 | DB-004~005 | hasUser检查 | ✅ 已覆盖 |
| - 获取用户 | DB-007~008 | getUser获取 | ✅ 已覆盖 |
| **更新 (Update)** | | | |
| - 修改主密码 | DB-009, CP-017 | updateUserPassword | ✅ 已覆盖 |
| - 修改主密码重加密 | 主流程 | 修改主密码后重加密所有密码 | ✅ 已覆盖 |
| **删除 (Delete)** | | | |
| - 重置删除 | DB-010 | resetMasterPassword清空数据 | ✅ 已覆盖 |

---

## 4. 测试用例统计更新

### 4.1 新增测试用例统计

| 模块 | 新增用例数 | 优先级分布 | 说明 |
|------|------------|------------|------|
| EditPasswordModal | 27 | 高: 18, 中: 9 | 编辑密码组件完整测试 |
| ExportModal | 27 | 高: 15, 中: 10, 低: 2 | 导出功能完整测试 |
| ChangePasswordModal | 25 | 高: 18, 中: 6, 低: 1 | 修改主密码完整测试 |
| SmartImportModal | 50 | 高: 35, 中: 13, 低: 2 | AI智能导入完整测试 |
| CategoryDisplayModal | 20 | 高: 14, 中: 6 | 分类显示设置完整测试 |
| **边界字段测试** | 36 | 高: 10, 中: 24, 低: 2 | 边界条件全面测试 |
| **总计** | **185** | 高: 110, 中: 68, 低: 7 | - |

### 4.2 完整测试用例汇总

| 来源 | 用例数 | 说明 |
|------|--------|------|
| 原测试设计文档 | 173 | 基础测试用例 |
| 本文档补充 | 185 | 新增组件和边界测试 |
| **总计** | **358** | 完整测试覆盖 |

---

## 5. 测试实现优先级建议

### 5.1 P0 - 核心功能（必须实现）

**服务层（后端）**
- CryptoService: CS-001~042 (全部)
- PasswordService: PS-001~035 (全部)
- DatabaseService: DB-001~029 (全部)

**页面层（前端）**
- LoginPage: LP-001~011
- SetupPage: SP-001~007
- MainPage: MP-001~014

**组件层（前端）**
- PasswordCard: PC-001~012
- AddPasswordModal: AP-001~015
- EditPasswordModal: EP-001~027
- CategoryModal: CM-001~007

### 5.2 P1 - 重要功能（建议实现）

**Ollama AI**
- OllamaService: OL-001~025
- SmartImportModal: SI-001~050

**导出和配置**
- ExportModal: EX-001~027
- SettingsModal: SM-001~008
- CategoryDisplayModal: CD-001~020
- ChangePasswordModal: CP-001~025

**边界测试**
- 边界字段测试: BL-001~036

### 5.3 P2 - 完善功能（可选实现）

- 所有标记为"低"优先级的测试用例
- 极端边界条件测试
- UI细节测试

---

*文档补充时间: 2026-02-09*
*补充说明: 本文档补充了原设计中缺失的5个组件测试和36个边界场景测试*
